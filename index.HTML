
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Gemini Blogger Asistan</title>
    <style>
        .panel { border: 3px solid #4285f4; border-radius: 15px; padding: 20px; text-align: center; font-family: sans-serif; background: #fff; max-width: 400px; margin: auto; }
        #micBtn { background: #ea4335; color: white; border: none; padding: 20px; border-radius: 50%; cursor: pointer; font-size: 24px; width: 80px; height: 80px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        #micBtn.active { background: #34a853; transform: scale(1.1); }
        #log { font-size: 12px; color: red; margin-top: 10px; background: #eee; padding: 5px; border-radius: 5px; display: none; }
        #status { font-weight: bold; margin: 15px 0; color: #333; }
    </style>
</head>
<body>

<div class="panel">
    <h3>Yapay Zeka Sesli Kontrol</h3>
    <button id="micBtn">ğŸ™ï¸</button>
    <div id="status">BaÅŸlamak iÃ§in butona tÄ±kla</div>
    <div id="log"></div> <div id="aiResponse" style="margin-top:15px; border-top:1px solid #ddd; padding-top:10px;"></div>
</div>

<script>
    const API_KEY = 'AIzaSyChUn6h6F15AoWM1Huu2BgRVOQx0BEyuPw';
    const micBtn = document.getElementById('micBtn');
    const status = document.getElementById('status');
    const log = document.getElementById('log');
    const aiResponse = document.getElementById('aiResponse');

    // HatalarÄ± ekranda gÃ¶stermek iÃ§in fonksiyon
    function showError(msg) {
        log.style.display = "block";
        log.innerText = "HATA: " + msg;
    }

    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    if (!SpeechRecognition) {
        showError("TarayÄ±cÄ± ses tanÄ±mayÄ± desteklemiyor. LÃ¼tfen Chrome kullanÄ±n.");
    } else {
        const recognition = new SpeechRecognition();
        recognition.lang = 'tr-TR';
        recognition.continuous = false;

        micBtn.addEventListener('click', () => {
            try {
                recognition.start();
                micBtn.classList.add('active');
                status.innerText = "Dinleniyor... KonuÅŸun.";
            } catch (e) {
                showError("Mikrofon baÅŸlatÄ±lamadÄ±: " + e.message);
            }
        });

        recognition.onresult = async (event) => {
            const transcript = event.results[0][0].transcript;
            status.innerText = "SÃ¶ylenen: " + transcript;
            micBtn.classList.remove('active');

            try {
                const res = await fetch(https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: transcript }] }] })
                });
                const data = await res.json();
                const reply = data.candidates[0].content.parts[0].text;
                
                aiResponse.innerText = reply;
                
                const synth = window.speechSynthesis;
                const utter = new SpeechSynthesisUtterance(reply);
                utter.lang = 'tr-TR';
                synth.speak(utter);
                
                status.innerText = "Usta cevap verdi. Tekrar bas.";
            } catch (err) {
                showError("Gemini baÄŸlantÄ± hatasÄ±: " + err.message);
            }
        };

        recognition.onerror = (event) => {
            micBtn.classList.remove('active');
            if (event.error === 'not-allowed') {
                showError("Mikrofon Ä°zni Engellendi! Adres Ã§ubuÄŸundaki kilit simgesine tÄ±kla ve izin ver.");
            } else {
                showError("Ses tanÄ±ma hatasÄ±: " + event.error);
            }
        };
    }
</script>

</body>
</html>



